# FPGA与CPLD

[TOC]

## 1. 数字电子器件

1. 基本器件类型：存储器、微处理器和逻辑器件。
	> 存储器用于存储信息；
	> 微处理器用于执行指令以完成规定的任务；
	> 逻辑器件用于提供数据通信、数据显示、接口通信、时序等一系列控制功能。
2. 逻辑器件分类：固定逻辑器件、可编程逻辑器件。
	> 固定逻辑器件是指为完成一组特定功能而实现的硬连接，其电路是水久性的；
	> 可编程逻辑器件（PLD）是指可通过软件编程修改其逻辑电路、为客户提供具有多种功能的标准部件。

## 2. PLD

1. PLD的结构：PLD由两种门阵列构成——与门阵列和或门阵列。
	> 原理：任一组合逻辑都可以用乘积和的形式来描述。
2. 分类：基于可编程只读存储器PROM的PLD、基于可编程阵列逻辑PAL的PLD、基于可编程逻辑阵列PLA的PLD。
	> 基于可编程只读存储器PROM的PLD：固定的与门阵列+可编程的或门阵列构成；
	> 基于可编程阵列逻辑PAL的PLD：可编程的与门阵列+固定的或门阵列构成。在PAL的基础上，又发展了通用阵列逻辑（GAL）；
	> 基于可编程逻辑阵列PLA的PLD：可编程的与门阵列+可编程的或门阵列构成。

## 3. FPGA的结构与特点

1. FPGA是基于查找表技术、SRAM工艺、要外挂配置EEPROM的PLD。
	> 查找表（LUT）本质上是一个RAM，目前多为4输入，可看作是一个有4位地址线的16*1的RAM。
	> 原理：当用户描述一个逻辑电路后，软件会自动计算逻辑电路所有可能结果，并把结果事先写入RAM，之后每输入一个信号进行逻辑运算就等于输入一个地址进行查表，找出地址内容输出即可。
2. 结构：采用逻辑单元阵列（LCA），内部包括可配置逻辑模块（CLB）、输入输出模块（IOB）、内部连线三部分。
	> 不同芯片的内部结构略有区别：
	> Spartan-II主要包括CLBs、I/O块、RAM块和可编程连线。一个CLB包括2个Slices，每个Slices包括两个LUT、两个触发器和相关逻辑。Slices可以看成是Spartan-II实现逻辑的最基本结构。
	> FLEX/ACEX的结构主要包括LAB、I/O块、EAB块和内部行/列连线。一个LAB包括8个逻辑单元LE，每个LE包括一个LUT、一个触发器和专用的信号通道。LE是FLEX/ACEX芯片实现逻辑的最基本结构。
3. 基本逻辑单元：CLB。每个CLB包含一个由4或6输入、一些选型电路和触发器组成的可配置开关矩阵。
4. 特点
	- FPGA支持很多I/O标准，内部I/O按组分类，独立支持不同I/O标准。
	- 大多数FPGA提供Block RAM存储器。FPGA通过片内RAM的程序设置其工作状态。加电后，先将EPROM中的数据读入片内RAM，配置完成后进入工作状态。掉电后，FPGA恢复成白片。
	- 大多数FPGA基于SRAM工艺，需要外加专用配置芯片，对于反熔丝或Flash工艺的FPGA不需要。
	- 大多数FPGA提供数字时钟管理。
	- FPGA采用高速CHMOS工艺，功耗低，可与CMOS、TTL电平兼容。
	- FPGA有多种配置模式：
		- 并行主模式：一片FPGA加载一片EPROM。
		- 主从模式：一片PROM编程多片FPGA。
		- 串行模式：串行PROM编程FPGA。
		- 外设模式：FPGA作为微处理器外设，微处理器对其编程。

## 4. CPLD的结构与特点

1. CPLD是基于乘积项技术、Flash工艺（或EEPROM工艺）的PLD。
2. 结构：宏单元、可编程连线（PIA）、I/O控制块。
	> 宏单元是CPLD的基本结构，用于实现基本逻辑功能；
	> PIA负责传递信号，连接所有宏单元；
	> I/O控制块负责输入/输出电气特性控制。
3. 特点：CPLD的逻辑块互连是集中式的，特点是等延时。

## 5. CPLD和FPGA对比

||CPLD|FPGA|
|------|------|------|
|结构|可编程逻辑宏单元、可编程I/O单元、可编程内部连线|可编程逻辑块CLB、可编程I/O模块、可编程内部连线|
|功能|CPLD适合触发器有限而乘积项丰富的结构，适合完成算法和组合逻辑|FPGA适合触发器丰富的结构，适合完成时序逻辑|
|速度|CPLD的运行速度一般优于FPGA，其采用逻辑块级编程，逻辑块互连是集中式的，CPLD通过修改具有固定内连电路的逻辑功能来编程|FPGA是门级编程，LAB之间采用分布式互连，FPGA通过改变内部连线的布线来编程|
|延时|CPLD逻辑块互连为集中式，其特点是等延时|FPGA互连是分布式，其延时与系统布局有关|
|存储|CPLD基于EEPROM或Flash存储器编程，有编程次数限制，掉电信息不丢失|FPGA基于SRAM，无编程次数限制，可进行动态配置，信息存放于外部存储器，掉电信息丢失，每次上电需重新写入|